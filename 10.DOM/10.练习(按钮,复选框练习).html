<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>

        <script>
            window.onload = function () {
                /* 
                    全选功能
                    取消
                    反选
                    提交
                    小checkbox和大checkbox同步
                */

                /* 
                    全选功能
                        - 点击按钮后，使四个多选框都变成选中状态
                */

                // 获取四个多选框
                const hobbies = document.getElementsByName("hobby");
                
                // 获取全选按钮
                const allBtn = document.getElementById("all")

                // 获取取消按钮
                const noBtn = document.getElementById("no")

                // 获取反选按钮
                const reverseBtn=document.getElementById("reverse");

                // 获取提交按钮
                const sendBtn=document.getElementById("send") 

                // 获取全选框
                const checkAllbox=document.getElementById("check-all");

                // 为全选按钮绑定单击响应函数
                allBtn.onclick = function () {
                    // 将多选框设置为选中状态
                    for(let i=0; i<hobbies.length; i++){
                        hobbies[i].checked = true
                    }
                    checkAllbox.checked=true;

                }

                // 为取消按钮绑定单击响应函数 
                noBtn.onclick = function(){
                    for(let i=0;i<hobbies.length;i++){
                        hobbies[i].checked = false;
                    }
                    checkAllbox.checked=false;
                }

                // 为反选按钮绑定单击响应函数 
                reverseBtn.onclick = function(){
                    for(let i=0;i<hobbies.length;i++){
                        hobbies[i].checked=!hobbies[i].checked;                    
                    }
                    // 获取所有选中的checkbook
                    const checkedBox=document.querySelectorAll("[name=hobby]:checked")
                            if(hobbies.length===checkedBox.length){
                                checkAllbox.checked=true;
                            }else{
                                checkAllbox.checked=false;
                            }
                }

                // 为提交按钮绑定单击响应函数 
                sendBtn.onclick = function(){
                    for(let i=0;i<hobbies.length;i++){
                        // if(hobbies[i].checked){
                        //     alert(hobbies[i].value);
                        // }
                        hobbies[i].checked && alert(hobbies[i].value);                
                    }
                }

                // 为全选多选框绑定单击响应函数
                checkAllbox.onchange = function () {
                    // console.log(this)
                    // 在事件的响应函数中，响应函数绑定给谁，谁就是 this(箭头函数除外)
                    for(let i=0; i<hobbies.length; i++){
                        hobbies[i].checked = this.checked;
                    }
                }

                // 使全选checkbox和四个小的checkbook同步
                for(let i=0; i<hobbies.length; i++){
                        hobbies[i].onchange = function(){
                            // 获取hobbies是否全选
                            // 获取所有选中的checkbook
                            const checkedBox=document.querySelectorAll("[name=hobby]:checked")
                            if(hobbies.length===checkedBox.length){
                                checkAllbox.checked=true;
                            }else{
                                checkAllbox.checked=false;
                            }
                            
                        }
                    }
            }
        </script>
    </head>
    <body>
        <div>
            <form action="#">
                <div>
                    请选择你的爱好：
                    <input type="checkbox" id="check-all" /> 全选
                </div>
                <div>
                    <input type="checkbox" name="hobby" value="乒乓球" /> 乒乓球
                    <input type="checkbox" name="hobby" value="篮球" /> 篮球
                    <input type="checkbox" name="hobby" value="羽毛球" /> 羽毛球
                    <input type="checkbox" name="hobby" value="足球" /> 足球
                </div>
                <div>
                    <button type="button" id="all">全选</button>
                    <button type="button" id="no">取消</button>
                    <button type="button" id="reverse">反选</button>
                    <button type="button" id="send">提交</button>
                </div>
            </form>
        </div>
    </body>
</html>
